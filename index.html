<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
        }
        /* Custom progress bar styling for a more modern look */
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #4a5568;
            border-radius: 4px;
            cursor: pointer;
        }
        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            border-radius: 4px;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Main Music Player Container -->
    <div class="w-full max-w-sm bg-gray-800 rounded-xl shadow-2xl p-6 text-white transform transition-transform duration-300 hover:scale-105">
        <h1 class="text-3xl font-bold mb-4 text-center">Music Player</h1>

        <!-- Song Details -->
        <div class="mb-6 text-center">
            <h2 id="song-title" class="text-xl font-semibold truncate">Loading...</h2>
            <p id="song-artist" class="text-gray-400">...</p>
        </div>

        <!-- Audio Element (hidden, JavaScript controls it) -->
        <audio id="audio-player" src="" preload="auto"></audio>

        <!-- Progress Bar -->
        <div class="progress-container mb-4" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <!-- Controls -->
        <div class="flex items-center justify-center space-x-6">
            <!-- Previous Button -->
            <button id="prev-btn" class="p-3 text-gray-400 hover:text-white transition-colors duration-200 focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                </svg>
            </button>

            <!-- Play/Pause Button -->
            <button id="play-pause-btn" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-transform duration-200 focus:outline-none transform scale-100 active:scale-95">
                <!-- Play SVG -->
                <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 5v14l11-7z"/>
                </svg>
                <!-- Pause SVG (initially hidden) -->
                <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="hidden">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                </svg>
            </button>

            <!-- Next Button -->
            <button id="next-btn" class="p-3 text-gray-400 hover:text-white transition-colors duration-200 focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 6h-2v12h2zm-9.5 6l-8.5 6V6z"/>
                </svg>
            </button>
        </div>

        <!-- Volume Control -->
        <div class="flex items-center mt-6 space-x-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="text-gray-400">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.81 5 3.54 5 6.71s-2.11 5.9-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
            <input type="range" id="volume-slider" min="0" max="100" value="75" class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer">
        </div>
        
        <!-- Add Local Songs Button -->
        <div class="flex justify-center mt-6">
            <label for="file-input" class="cursor-pointer bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full transition-colors duration-200">
                Add Local Songs
            </label>
            <input type="file" id="file-input" multiple accept="audio/*" class="hidden">
        </div>
    </div>

    <!-- JavaScript for Player Logic -->
    <script>
        // Get references to all the necessary DOM elements
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const songTitleEl = document.getElementById('song-title');
        const songArtistEl = document.getElementById('song-artist');
        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.getElementById('progress-container');
        const volumeSlider = document.getElementById('volume-slider');
        const fileInput = document.getElementById('file-input');

        // Define an initial list of songs
        const initialSongList = [
            {
                title: "Green Leaves",
                artist: "Audionautix",
                src: "https://audionautix.com/Music/GreenLeaves.mp3"
            },
            {
                title: "Acoustic Folk",
                artist: "Audionautix",
                src: "https://audionautix.com/Music/AcousticFolk.mp3"
            },
            {
                title: "Morning Sun",
                artist: "Audionautix",
                src: "https://audionautix.com/Music/MorningSun.mp3"
            }
        ];

        let songList = [...initialSongList]; // Use a copy of the initial list
        let currentSongIndex = 0;
        let isPlaying = false;

        // Function to load a song into the player
        function loadSong(index) {
            const song = songList[index];
            audioPlayer.src = song.src;
            songTitleEl.textContent = song.title;
            songArtistEl.textContent = song.artist;
            // Reset the progress bar when a new song is loaded
            progressBar.style.width = '0%';
        }

        // Function to play the song
        function playSong() {
            // Check if there are songs to play
            if (songList.length > 0) {
                isPlaying = true;
                audioPlayer.play().catch(error => {
                    console.error("Autoplay was prevented:", error);
                    // Handle the error gracefully, maybe show a message to the user
                    songTitleEl.textContent = "Error: Click play to start";
                });
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            }
        }

        // Function to pause the song
        function pauseSong() {
            isPlaying = false;
            audioPlayer.pause();
            playIcon.classList.remove('hidden');
            pauseIcon.classList.add('hidden');
        }

        // Event listener for the play/pause button
        playPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                pauseSong();
            } else {
                playSong();
            }
        });

        // Event listener for the previous button
        prevBtn.addEventListener('click', () => {
            if (songList.length > 0) {
                currentSongIndex = (currentSongIndex - 1 + songList.length) % songList.length;
                loadSong(currentSongIndex);
                playSong();
            }
        });

        // Event listener for the next button
        nextBtn.addEventListener('click', () => {
            if (songList.length > 0) {
                currentSongIndex = (currentSongIndex + 1) % songList.length;
                loadSong(currentSongIndex);
                playSong();
            }
        });

        // Event listener to update the progress bar
        audioPlayer.addEventListener('timeupdate', () => {
            const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
        });

        // Event listener to allow seeking by clicking on the progress bar
        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        });

        // Event listener for the volume slider
        volumeSlider.addEventListener('input', (e) => {
            audioPlayer.volume = e.target.value / 100;
        });

        // Event listener to play the next song automatically when the current one ends
        audioPlayer.addEventListener('ended', () => {
            currentSongIndex = (currentSongIndex + 1) % songList.length;
            loadSong(currentSongIndex);
            playSong();
        });
        
        // Event listener for the file input to handle local song selection
        fileInput.addEventListener('change', (event) => {
            const files = event.target.files;
            if (files.length > 0) {
                songList = []; // Clear the existing song list
                for (const file of files) {
                    const song = {
                        title: file.name,
                        artist: "Local Artist", // Placeholder for local songs
                        src: URL.createObjectURL(file) // Create a temporary URL for the file
                    };
                    songList.push(song);
                }
                
                currentSongIndex = 0; // Start with the first added song
                loadSong(currentSongIndex);
                playSong();
            }
        });

        // Initial load of the first song
        window.onload = function() {
            loadSong(currentSongIndex);
        };
    </script>

</body>
</html>
